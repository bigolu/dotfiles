#!/bin/sh

branches_merged_to_master=$(git branch --merged ${1-master} | grep -v " ${1-master}$")

if [ "$branches_merged_to_master" = "" ]; then
    echo 'No branches to delete'
    return
fi

echo "The following branches have already been merged to master:\n${branches_merged_to_master}"
echo "Are these branches ok to delete? (y/n): "
read response
if [ "$response" = "y" ]; then
    echo "$branches_merged_to_master" | xargs -r git branch -d
    echo "Branches deleted"
else
    echo "No branches were deleted"
fi
