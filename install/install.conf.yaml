- defaults:
    link:
      create: true
    shell:
      stdin: true
      stdout: true
      stderr: true

- clean:
    ~/.config:
        recursive: true
    # Dotbot fails if I don't add a slash after '~'
    ~/: {}
    ~/.vim: {}
    ~/.local/bin: {}
    ~/.local/share/nvim: {}
    ~/.ipython:
        recursive: true
    ~/.local/share/applications: {}

- link:
    ~/.tmux.conf: tmux/tmux.conf
    ~/.config/nvim/init.lua: neovim/init.lua
    ~/.config/nvim/profiles: neovim/profiles
    ~/.local/share/nvim/vim-plug-snapshot.vim: neovim/vim-plug-snapshot.vim
    ~/.gitconfig: git/gitconfig
    ~/.bashrc: bash/bashrc
    ~/.bash_profile: bash/bash_profile
    ~/.config/kitty: kitty
    ~/.config/kitty/current-theme.conf:
        path: ~/.config/kitty/night-theme.conf
        if: '[ ! -f ~/.config/kitty/current-theme.conf ]'
    ~/.asdfrc: asdf/asdfrc
    ~/.tool-versions: asdf/tool-versions
    ~/.local/bin/:
        glob: true
        path: executables/*
    ~/.cloudflared/config.yaml: cloudflared/config.yaml
    ~/.ripgreprc: ripgrep/ripgreprc
    ~/.config/gitui/theme.ron: gitui/theme.ron
    ~/.config/fish/config.fish: fish/config.fish
    ~/.config/fish/conf.d/:
        glob: true
        path: fish/conf.d/*
    ~/.config/fish/my-functions/:
        glob: true
        path: fish/functions/*
    ~/.config/fish/fish_plugins: fish/fish_plugins
    ~/.config/bat/config: bat/config
    ~/.lesskey: less/lesskey
    ~/.config/bat/themes/base16-brighter.tmTheme: bat/base16-brighter.tmTheme
    ~/.config/direnv/direnv.toml: direnv/direnv.toml
    ~/.ignore: ignore
    ~/.default-cargo-crates: asdf/default-cargo-crates
    ~/.default-python-packages: asdf/default-python-packages
    ~/.default-npm-packages: asdf/default-npm-packages
    ~/.config/pipr/pipr.toml: pipr/pipr.toml
    ~/.config/brewfile/Brewfile: brew/Brewfile
    ~/.config/pipx/pipx-packages: pipx/pipx-packages
    ~/.local/bin/delta-with-fallback-to-less: git/delta-with-fallback-to-less
    ~/.config/viddy.toml: viddy/viddy.toml
    ~/.dotfiles/.git/hooks/post-merge: install/update_tools.sh
    ~/.markdownlint.jsonc: markdownlint/markdownlint.jsonc
    ~/.local/share/figlet/smblock.tlf: figlet/smblock.tlf
    ~/.local/share/applications/firefox-developer-edition.desktop: firefox/firefox-developer-edition.desktop
    ~/.local/share/applications/my-firefox.desktop: firefox/my-firefox.desktop
    ~/.local/share/applications/code.desktop: vscode/code.desktop
    ~/.yashrc: yash/yashrc
    ~/.ipython/profile_default/ipython_config.py: ipython/ipython_config.py
    ~/.ipython/profile_default/startup/:
        glob: true
        path: ./ipython/startup/*
    ~/.config/lsd: lsd
    ~/.fbtermrc: fbterm/fbtermrc
    ~/.vale.ini: vale/vale.ini
    ~/.config/vale/styles/base: vale/styles/base
    ~/.config/vale/styles/ignore.txt: vale/styles/ignore.txt
    ~/.config/nix/nix.conf: nix/nix.conf
    ~/.config/nix/nix-packages.txt: nix/nix-packages.txt

# Using another link directive since I have multiple links to this directory and you can't have
# multiple keys with the same name in YAML
- link:
    ~/.local/bin/:
        glob: true
        path: git/subcommands/*

- create:
    - ~/code

- shell:
    -
        description: Setup brew
        command: ./brew/install.sh
    -
        description: Setup nix
        command: ./nix/install.sh
    -
        description: Build bat cache
        command: bat cache --build
    -
        description: Link font config
        command: ./fontconfig/install.fish
    -
        description: Link watchman configs
        command: ./watchman/install.fish
    -
        description: Install asdf tools
        command: asdf install
    -
        description: Install pipx tools
        command: xargs -I PACKAGE pipx install PACKAGE < "pipx/pipx-packages"
    -
        description: Link Firefox configs
        command: ./firefox/install.sh
    -
        description: Setup Linux
        command: ./linux/setup
